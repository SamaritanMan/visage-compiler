This directory contains JDI implementation for Visage.

How to build/test fxjdi.jar?

* make sure that you set JAVA_HOME pointing to JDK6. FX-JDI uses JDK 6
JDI interface and so requires JDK 6 to build and run.

* make sure that you build compiler repo (by running "ant" in parent dir.

* run "ant jar" or "ant" (builds and tests fxjdi.jar) in this directory.

How to run command line FX-JDI debugger?

In addition to a JDI implementation, there is also a command line debugger
like "jdb". This implementation is derived from jdb implementation except 
that this one uses FX-JDI connectors by default.

To run command line debugger on Mac OS, you can use

    java -jar fxjdi.jar <java-main-class>

or to use Visage target programs:

    java -jar fxjdi.jar -classpath <path-of-visagert.jar>  \
        org.visage.runtime.Main <visage-module-class>

On Windows and Linux, you can use the following commands:

    java -cp <path-of-tools.jar>:fxjdi.jar org.visage.tools.debug.tty.TTY \
        <java-main-class>

or to use Visage target programs:

    java -cp <path-of-tools.jar>:fxjdi.jar org.visage.tools.debug.tty.TTY \
        -classpath <path-of-visagert.jar> org.visage.runtime.Main \
        <visage-module-class>

Notes on FX-JDI implementation:
    
* FX-JDI connectors are in org.visage.jdi.connect package.

* org.visage.jdi, .event, .request packages have classes implementing
interfaces of com.sun.jdi, com.sun.jdi.event, com.sun.jdi.request respectively.

* FX-JDI implementing classes delegate to underlying platform JDI objects.
The wrapping/unwrapping is primarily done in org.visage.jdi.FXWrapper
and org.visage.jdi.FXVirtualMachine.

* FXObjectType, FXSequenceType represent org.visage.runtime.FXObject
and org.visage.runtime.sequence.Sequence types respectively.

* Command line debugger implementation is org.visage.tools.debug.tty.TTY.
See also: src/org/visage/tools/debug/README.

* org.visage.tools.debug.tty.Debugger is programmatic interface to command
line debugger. This is currently used for testing - but it can be in futue.

* Testing:

The TestScaffold framework for platform JDI testing has been customized to test
FX-JDI. For a Java example, please refer to org.visage.jdi.test.FramesTest.
Each FX-JDI test uses launching connector with a target/debugger program.
The target/debuggee sources are in org.visage.jdi.test.target package.
For example, FramesTarget.java is the debuggee used by FramesTest.java. There
are also Visage examples. HelloTarget.visage, SequenceTarget.visage are target Visage
programs. Corresponding debugger tests are HelloTest.java and SequenceTest.java.
Visage debugger tests are derived from JavafxTestBase (which is derived from
TestScaffold). This takes care using visagert.jar in classpath of debuggee
and also using org.visage.runtime.Main as the main class of the debuggee.

To run the tests, run:

    ant test
